!function(t){"use strict";var e=e||{},s=document.all&&document.attachEvent,h=1e3,i=s&&window.XMLHttpRequest&&window.addEventListener&&9<=document.documentMode,n=!s||i?"svg":"vml",r=[];function l(t,s){return"function"==typeof t&&(t=String(t).replace(/^[^\{]*\{\s*\/\*!?[ \f\t\v]*\n?|[ \f\t\v]*\*\/[;|\s]*\}$/g,"")),t.replace(/#\{(.*?)\}/g,function(t,e){return s&&e in s?s[e]:""})}function c(t){var r=[0,0],h=[0,0],l=[];return String(t).replace(/([mlcza])((\s*,?\s*([+-]?\d+(?:\.\d+)?)+)*)/gi,function(t,i,e){switch(i){case"M":case"L":var a=!1;e.replace(/\s*,?\s*([+-]?\d+(?:\.\d+)?)\s*,?\s*([+-]?\d+(?:\.\d+)?)/gi,function(t,e,s){r=[+e,+s],l.push(["L"===i||a?"L":"M",r]),a=!0,"M"===i&&(h=r)});break;case"C":e.replace(/\s*,?\s*([+-]?\d+(?:\.\d+)?)\s*,?\s*([+-]?\d+(?:\.\d+)?)\s*,?\s*([+-]?\d+(?:\.\d+)?)\s*,?\s*([+-]?\d+(?:\.\d+)?)\s*,?\s*([+-]?\d+(?:\.\d+)?)\s*,?\s*([+-]?\d+(?:\.\d+)?)/gi,function(t,e,s,i,a,h,n){r=[0,0],l.push(["C",[+e+r[0],+s+r[1],+i+r[0],+a+r[1],+h+r[0],+n+r[1]]]),r=[+h+r[0],+n+r[1]]});break;case"Z":l.push(["Z"]),r=h}}),l}function a(t){var e,s;"string"==typeof(t=t||{}).parent?this.parent=document.getElementById(t.parent):this.parent=t.parent||document.body,this.fill=t.fill||"none",this.fillOpacity=t.fillOpacity||t["fill-opacity"]||1,this.stroke=t.stroke||"black",this.strokeWidth=t.strokeWidth||t["stroke-width"]||1,this.strokeOpacity=t.strokeOpacity||t["stroke-opacity"]||1,this.path=t.path||"M 0,0";for(var i=r.length-1;0<=i;i--){var a=r[i];if(a.parent===this.parent){e=a;break}}switch(/^canvas$/i.test(this.parent.tagName)&&(n="canvas",this.pathDetails=c(this.path),this.repaint(!0)),n){case"canvas":this.canvas=this.parent,e?this.canvasPaths=e.paths:(this.canvasPaths=[],r.push({parent:this.parent,paths:this.canvasPaths})),this.canvasPaths.push(this),this.repaint(!0);break;case"svg":(s=document.createElement("div")).innerHTML=l(function(){},this),this.elementPath=s.querySelector("path"),e?(this.element=e.element,this.element.appendChild(this.elementPath)):(this.element=s.querySelector("svg"),r.push({parent:this.parent,element:this.element}),this.parent.appendChild(this.element));break;case"vml":s=document.createElement("div"),this.filled="none"==this.fill?"f":"t",this.stroked="none"==this.stroke?"f":"t",this.zoom=h,s.innerHTML=l(function(){},this),this.elementPath=s.lastChild,e?(this.element=e.element,this.element.appendChild(this.elementPath)):((this.element=s).className="jpaths_path_panel",r.push({parent:this.parent,element:this.element}),this.parent.appendChild(this.element)),this.elementFill=this.elementPath.getElementsByTagName("fill")[0],this.elementStroke=this.elementPath.getElementsByTagName("stroke")[0]}}e.format=l,a.prototype.repaint=function(t){if(this.canvas){var e,s=this.canvas.getContext("2d");if(s)if(t)for(s.save(),s.fillStyle="transparent",s.globalCompositeOperation="copy",s.fillRect(0,0,this.canvas.width,this.canvas.height),s.restore(),e=0;e<this.canvasPaths.length;e++)this.canvasPaths[e].repaint();else if(this.pathDetails){s.save(),s.beginPath();var i=[0,0];for(e=0;e<this.pathDetails.length;e++){var a=this.pathDetails[e];switch(a[0]){case"Z":s.closePath(),i;break;case"C":s.bezierCurveTo(a[1][0],a[1][1],a[1][2],a[1][3],a[1][4],a[1][5]),[a[1][2],a[1][3]];break;case"L":[a[1][0],a[1][1]],s.lineTo(a[1][0],a[1][1]);break;case"M":[a[1][0],a[1][1]],i=[a[1][0],a[1][1]],s.moveTo(a[1][0],a[1][1])}}"none"!==this.stroke&&(s.strokeStyle=this.stroke,s.stroke()),s.lineWidth=this.strokeWidth,"none"!==this.fill&&(s.fillStyle=this.fill,s.fill()),s.restore()}}},a.prototype.attr=function(t,e,s){if(!this.freed)if(1===arguments.length){if("string"==typeof t)return"stroke-width"===t&&(t="strokeWidth"),this[t];if("object"==typeof t){for(var i in t)this.attr(i,t[i],!0);return this}}else if(1<arguments.length){switch(t){case"path":if(this.path===e)break;switch(this.path=e,n){case"svg":this.elementPath.setAttribute("d",e||"M 0,0");break;case"vml":this.elementPath.path=String(e||"M 0,0").replace(/\d+(\.\d+)?/g,function(t){return parseInt(t*h)}).replace(/z/gi,"X");break;case"canvas":this.pathDetails=c(this.path),this.repaint(!0)}break;case"fill":if(this.fill===e)break;switch(this.fill=e,n){case"svg":this.elementPath.setAttribute("fill",e);break;case"vml":this.elementPath.Filled=this.filled="none"===this.fill?"f":"t",this.elementFill.Color=e;break;case"canvas":s&&this.repaint(!0)}break;case"stroke":if(this.stroke===e)break;switch(this.stroke=e,n){case"svg":this.elementPath.setAttribute("stroke",e);break;case"vml":this.elementPath.Stroked=this.stroked="none"===this.stroke?"f":"t",this.elementStroke.Color=e;break;case"canvas":s&&this.repaint(!0)}break;case"fillOpacity":case"fill-opacity":if(this.fillOpacity===e)break;switch(this.fillOpacity=e,n){case"svg":this.elementPath.setAttribute("fill-opacity",e);break;case"vml":this.elementFill.Opacity=Math.min(Math.max(0,e),1);break;case"canvas":s&&this.repaint(!0)}break;case"strokeOpacity":case"stroke-opacity":if(this.strokeOpacity===e)break;switch(this.strokeOpacity=e,n){case"svg":this.elementPath.setAttribute("stroke-opacity",e);break;case"vml":this.elementStroke.Opacity=Math.min(Math.max(0,e),1);break;case"canvas":s&&this.repaint(!0)}break;case"strokeWidth":case"stroke-width":if(this.strokeWidth==e)break;switch(this.strokeWidth=e,n){case"svg":this.elementPath.setAttribute("stroke-width",e);break;case"vml":this.elementStroke.weight=e;break;case"canvas":s&&this.repaint(!0)}}return this}},a.prototype.free=function(){if(!this.freed)switch(this.freed=!0,n){case"svg":case"vml":this.elementPath.parentNode.removeChild(this.elementPath),this.elementPath=null;break;case"canvas":for(var t=0;t<this.canvasPaths.length;t++)if(this.canvasPaths[t]===this){this.canvasPaths.splice(t,1),this.repaint(!0);break}}},e.create=function(t){return new a(t)},"vml"===n&&(document.createStyleSheet().cssText=l(function(){},t)),"function"==typeof define?(define.amd||define.cmd)&&define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:window[t]=e}("jpaths");