var jpaths="undefined"==typeof exports?jpaths||{}:exports;void function(t){"use strict";function e(t,e){return t.replace(/#\{(.*?)\}/g,function(t,s){return e&&s in e?e[s]:""})}function s(t){var e=[0,0],s=[0,0],i=[];return String(t).replace(/([mlcza])((\s*,?\s*([+-]?\d+(?:\.\d+)?)+)*)/gi,function(t,a,h){switch(a){case"M":case"L":var n=!1;h.replace(/\s*,?\s*([+-]?\d+(?:\.\d+)?)\s*,?\s*([+-]?\d+(?:\.\d+)?)/gi,function(t,h,r){e=[+h,+r],i.push(["L"===a||n?"L":"M",e]),n=!0,"M"===a&&(s=e)});break;case"C":h.replace(/\s*,?\s*([+-]?\d+(?:\.\d+)?)\s*,?\s*([+-]?\d+(?:\.\d+)?)\s*,?\s*([+-]?\d+(?:\.\d+)?)\s*,?\s*([+-]?\d+(?:\.\d+)?)\s*,?\s*([+-]?\d+(?:\.\d+)?)\s*,?\s*([+-]?\d+(?:\.\d+)?)/gi,function(t,s,a,h,n,r,l){e=[0,0],i.push(["C",[+s+e[0],+a+e[1],+h+e[0],+n+e[1],+r+e[0],+l+e[1]]]),e=[+r+e[0],+l+e[1]]});break;case"Z":i.push(["Z"]),e=s}}),i}function i(t){t=t||{},this.parent="string"==typeof t.parent?document.getElementById(t.parent):t.parent||document.body,this.fill=t.fill||"none",this.fillOpacity=t.fillOpacity||t["fill-opacity"]||1,this.stroke=t.stroke||"black",this.strokeWidth=t.strokeWidth||t["stroke-width"]||1,this.strokeOpacity=t.strokeOpacity||t["stroke-opacity"]||1,this.path=t.path||"M 0,0";for(var i,a=o.length-1;a>=0;a--){var h=o[a];if(h.parent===this.parent){i=h;break}}/^canvas$/i.test(this.parent.tagName)&&(l="canvas",this.pathDetails=s(this.path),this.repaint(!0));var r;switch(l){case"canvas":this.canvas=this.parent,i?this.canvasPaths=i.paths:(this.canvasPaths=[],o.push({parent:this.parent,paths:this.canvasPaths})),this.canvasPaths.push(this),this.repaint(!0);break;case"svg":r=document.createElement("div"),r.innerHTML=e('\n<svg width=100% height=100% xmlns="http://www.w3.org/2000/svg">\n  <path fill="#{fill}"\n    fill-rule="evenodd"\n    stroke-linejoin="round"\n    fill-opacity="#{fillOpacity}"\n    stroke="#{stroke}"\n    stroke-opacity="#{strokeOpacity}"\n    stroke-width="#{strokeWidth}" d="#{path}"\n</svg>\n',this),this.elementPath=r.lastChild.lastChild,i?(this.element=i.element,this.element.appendChild(this.elementPath)):(this.element=r.lastChild,o.push({parent:this.parent,element:this.element}),this.parent.appendChild(this.element));break;case"vml":r=document.createElement("div"),this.filled="none"==this.fill?"f":"t",this.stroked="none"==this.stroke?"f":"t",this.zoom=n,r.innerHTML=e('\n<v:shape class="jpaths_path_shape jpaths_vml"\n  coordsize="#{zoom},#{zoom}"\n  stroked="#{stroked}"\n  filled="#{filled}"\n  path="#{path}">\n  <v:stroke class="jpaths_vml"\n    opacity="#{strokeOpacity}"\n    color="#{stroke}"\n    weight="#{strokeWidth}">\n  </v:stroke>\n  <v:fill class="jpaths_vml"\n    opacity="#{fillOpacity}"\n    color="#{fill}">\n  </v:fill>\n</v:shape>\n',this),this.elementPath=r.lastChild,i?(this.element=i.element,this.element.appendChild(this.elementPath)):(this.element=r,r.className="jpaths_path_panel",o.push({parent:this.parent,element:this.element}),this.parent.appendChild(this.element)),this.elementFill=this.elementPath.getElementsByTagName("fill")[0],this.elementStroke=this.elementPath.getElementsByTagName("stroke")[0]}}function a(t){return new i(t)}var h=document.all&&document.attachEvent,n=1e3,r=h&&window.XMLHttpRequest&&window.addEventListener&&document.documentMode>=9,l=!h||r?"svg":"vml",o=[];i.prototype.repaint=function(t){if(this.canvas){var e,s=this.canvas.getContext("2d");if(s)if(t)for(s.save(),s.fillStyle="transparent",s.globalCompositeOperation="copy",s.fillRect(0,0,this.canvas.width,this.canvas.height),s.restore(),e=0;e<this.canvasPaths.length;e++)this.canvasPaths[e].repaint();else if(this.pathDetails){s.save(),s.beginPath();var i=[0,0],a=[0,0];for(e=0;e<this.pathDetails.length;e++){var h=this.pathDetails[e];switch(h[0]){case"Z":s.closePath(),i=a;break;case"C":s.bezierCurveTo(h[1][0],h[1][1],h[1][2],h[1][3],h[1][4],h[1][5]),i=[h[1][2],h[1][3]];break;case"L":i=[h[1][0],h[1][1]],s.lineTo(h[1][0],h[1][1]);break;case"M":i=[h[1][0],h[1][1]],a=[h[1][0],h[1][1]],s.moveTo(h[1][0],h[1][1])}}"none"!==this.stroke&&(s.strokeStyle=this.stroke,s.stroke()),s.lineWidth=this.strokeWidth,"none"!==this.fill&&(s.fillStyle=this.fill,s.fill()),s.restore()}}},i.prototype.attr=function(t,e){if(!this.freed)if(1===arguments.length){if("string"==typeof t)return"stroke-width"===t&&(t="strokeWidth"),this[t];if("object"==typeof t){for(var i in t)this.attr(i,t[i],!0);return this}}else if(arguments.length>1){switch(t){case"path":if(this.path===e)break;switch(this.path=e,l){case"svg":this.elementPath.setAttribute("d",e||"M 0,0");break;case"vml":this.elementPath.path=String(e||"M 0,0").replace(/\d+(\.\d+)?/g,function(t){return parseInt(t*n)}).replace(/z/gi,"X");break;case"canvas":this.pathDetails=s(this.path),this.repaint(!0)}break;case"fill":if(this.fill===e)break;switch(this.fill=e,l){case"svg":this.elementPath.setAttribute("fill",e);break;case"vml":this.elementPath.Filled=this.filled="none"===this.fill?"f":"t",this.elementFill.Color=e;break;case"canvas":batch&&this.repaint(!0)}break;case"stroke":if(this.stroke===e)break;switch(this.stroke=e,l){case"svg":this.elementPath.setAttribute("stroke",e);break;case"vml":this.elementPath.Stroked=this.stroked="none"===this.stroke?"f":"t",this.elementStroke.Color=e;break;case"canvas":batch&&this.repaint(!0)}break;case"fillOpacity":case"fill-opacity":if(this.fillOpacity===e)break;switch(this.fillOpacity=e,l){case"svg":this.elementPath.setAttribute("fill-opacity",e);break;case"vml":this.elementFill.Opacity=Math.min(Math.max(0,e),1);break;case"canvas":batch&&this.repaint(!0)}break;case"strokeOpacity":case"stroke-opacity":if(this.strokeOpacity===e)break;switch(this.strokeOpacity=e,l){case"svg":this.elementPath.setAttribute("stroke-opacity",e);break;case"vml":this.elementStroke.Opacity=Math.min(Math.max(0,e),1);break;case"canvas":batch&&this.repaint(!0)}break;case"strokeWidth":case"stroke-width":if(this.strokeWidth==e)break;switch(this.strokeWidth=e,l){case"svg":this.elementPath.setAttribute("stroke-width",e);break;case"vml":this.elementStroke.weight=e;break;case"canvas":batch&&this.repaint(!0)}}return this}},i.prototype.free=function(){if(!this.freed)switch(this.freed=!0,l){case"svg":case"vml":this.elementPath.parentNode.removeChild(this.elementPath),this.elementPath=null;break;case"canvas":for(var t=0;t<this.canvasPaths.length;t++)if(this.canvasPaths[t]===this){this.canvasPaths.splice(t,1),this.repaint(!0);break}}},"vml"===l&&(document.createStyleSheet().cssText=e("\n.#{this}_vml {\n  behavior: url(#default#VML);\n}\n.#{this}_path_shape {\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: 0;\n  left: 0;\n  top: 0;\n  position: absolute;\n}\n.#{this}_path_panel {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  padding: 0;\n  margin: 0;\n  position: relative;\n}\n","jpaths")),t.create=a}(jpaths);
//# sourceMappingURL=dist/jpaths.min.js.map